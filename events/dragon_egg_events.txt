namespace = dragon_egg_events

# Trigger to age Dragon Eggs
dragon_egg_events.0001 = {
	type = character_event
	hidden = yes

	trigger = {
		random_character_artifact = {
			limit = {
				artifact_type = dragon_egg
			}
		}
	}

	immediate = {
		random_character_artifact = {
			limit = {
				artifact_type = dragon_egg
			}
			save_scope_as = dragon_egg_artifact
		}
		trigger_event = dragon_egg_events.0003
	}
}

# Dragon Egg Hatches
dragon_egg_events.0002 = {
	type = character_event
	title = dragon_egg_events.0002.t
	desc = dragon_egg_events.0002.desc

	option = {
		name = dragon_egg_events.0002.a
		trigger_event = dragon_spawn.0006
	}

	after = {
		destroy_artifact = scope:dragon_egg_artifact
	}
}

# Age Dragon Egg
dragon_egg_events.0003 = {
	type = character_event
	hidden = yes

	immediate = {
		if = {
			limit = {
				scope:dragon_egg_artifact.var:egg_age >= 2 # aka if already 2 years old, this is its 3rd year, so it hatches
			}
			trigger_event = dragon_egg_events.0002
		} else = {
			scope:dragon_egg_artifact = {
				change_variable = {
					name = egg_age
					add = 1
				}
			}
		}
	}
}